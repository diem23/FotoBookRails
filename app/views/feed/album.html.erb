<%session[:failure_redirect]=feed_album_path%>
<!DOCTYPE html>
<html>
  <head>
    <title>RubyPj</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
   
    <%= stylesheet_link_tag "feed_album", "data-turbo-track": "reload" %>
  </head>
    <body>
    <div class="row feed album">
                <div class="col-0 col-lg-2 d-none d-lg-flex flex-row justify-content-center mt-4">
                    <ul class="d-inline-block nav-list" >
                        <a href="/">
                            <li class="d-block mb-2">Feeds</li>
                        </a>
                        <a href="/discover/photo">
                            <li class="d-block mb-2">Discover</li>
                        </a>
                    </ul>
                </div>
                <div class="col-12 col-lg-8 center-container d-flex flex-column align-items-center"> 
                    
                    <div class="switch-mode d-flex mt-4">
                        <a href="/">
                            <div class="photo-btn p-2">PHOTO</div>
                        </a>
                        <a href="#">
                            <div class="album-btn p-2">ALBUM</div>
                        </a>
                    </div>
                    <div class="row w-100 feed_album mt-4 h-100 mb-4 ">
                        <% if ! user_signed_in? %>
                            <% p "not signed", "testinggggggggggggggg" %>
                            <div class="col-12 d-flex justify-content-center align-items-center">
                                <p> Please sign in to view this content</p>
                            </div>
                        <% elsif @list_albums.empty? %>
                            <div class="col-12 d-flex justify-content-center align-items-center ">
                                <p>Please follow some friends to have content in this page</p>
                            </div>
                        <% else %>
                            <% @list_albums.each_with_index do |ele,index|%>
                                <%= render 'shared/album_card', ele: ele, index: index, have_follow: false %>
                            <%end%>
                        <% end %>
                            
                    </div>
                    <%if @pagy%>
                        <div class=" w-100 d-flex justify-content-center mt-4">
                                <%== pagy_bootstrap_nav(@pagy)%>
                                
                            </div>
                        </div>
                    <% end %>
                </div>
                
                <div class="col-0 col-lg-2"></div>
            </div> 
</html>
<script>
let userBtns = document.querySelectorAll('.specific-user-btn')
userBtns.forEach((btn)=>{
    console.log("hello")
    btn.addEventListener('click',function stopPropagation(event){
        event.stopPropagation();
    })
}) 
let likeBtns = document.querySelectorAll('.like-btn')
likeBtns.forEach((btn)=>{
    btn.addEventListener('click',function stopPropagation(event){
        console.log("onclick like")
        event.stopPropagation();
        if (btn.classList.contains("unheart")){
            console.log("Hello")
            btn.classList.remove("unheart")
        }else{
            console.log("hehe")
            btn.classList.add("unheart")
        }
    })
})                                                 
let followBtns =   document.querySelectorAll('.follow-btn')  
followBtns.forEach((btn)=>{
    btn.addEventListener('click',function stopPropagation(event){
        event.stopPropagation();
        if (btn.innerHTML == "Follow"){
            btn.innerHTML = "Following"
            btn.classList.add("unfollow-btn")
        }else{
            btn.innerHTML = "Follow"
            btn.classList.remove("unfollow-btn")
        }
    })
})                                               

function showModal(modalId){
    var myModal = new bootstrap.Modal(document.getElementById(modalId), {
        keyboard: false
    })
    myModal.show()
}
</script>