<!DOCTYPE html>
<html>
  <head>
    <title>RubyPj</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/89b8c94d61.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <%= javascript_importmap_tags %>
    <%= javascript_include_tag "jquery" %>
    <%= javascript_include_tag "rails-ujs"%>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%#<%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="page-container">
        <div class="header-bar-mini d-lg-none row">
                <div class="left-side-mini col-9 row align-items-center gx-2">
                    <div class="col-5 col-sm-4 d-flex align-items-center gap-6">
                        <div class="dropdown show-dropdown">
                            <button class="btn btn-secondary show-dropdown px-2" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fa-solid fa-bars"></i>
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </div>
                        <h1 >Fotobook</h1>
                    </div>
                    <div class="search-box col-6 col-sm-7">
                        <input type="text" class="search d-none d-sm-inline-block" placeholder="Search Photo / Album">
                        <input type="text" class="search d-sm-none" placeholder="Search">
                    </div>
                    
                </div>
                <div class="right-side-mini col-2 d-flex align-items-center justify-content-end">
                    <div class="btn-group show-dropdown ">
                        <button class="btn btn-secondary  show-dropdown px-2 " type="button" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
                            <div class="avt-box "></div>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" >
                            <li >
                                <button class="dropdown-item" type="button">
                                    <div class="personal-box">
            
                                        <p>Minh Diem</p>
                                    </div>
                                </button>
                            </li>
                            <li  >
                                <button class="dropdown-item" type="button" formaction="destroy_user_session_path">
                                
                                    <div class="logout-box">Logout</div>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div>
        </div>
        <div class="header-bar d-none d-lg-flex row ml-0 mr-0">   
            <div class="left-side col-md-6 col-sm-6 row align-items-center ml-1">
                <div class="col-md-3 col-6 title-box">
                    <% if user_signed_in? && current_user.isAdmin %>
                        <h1>Fotobook Admin</h1>
                    <% else %>
                        <h1>Fotobook</h1>
                    <% end %>
                </div>
                
                <div class="search-box col-md-8 col-6">
                    <input type="text" class="search" placeholder="Search Photo / Album">
                </div>
            </div>
            <% if user_signed_in? %>
                <% puts current_user.firstName %>
                <div class="right-side col-md-6 col-sm-6 row">
                    <a href="#" class="col-md-8">
                    <div class="personal-box">
                        <%= button_to user_path(current_user.id), method: :get, class: "d-flex flex-row align-items-center justify-content-start gap-10" do %>
                                <div class="avt-box">
                                    <%= render '/shared/display_image', ele: current_user.profileImg, className: "img-fluid"%>
                                </div>
                                <p><%=current_user.firstName%></p>
                                <% end %>
                            </div>
                    </a>
                    <a href="/authenticate/login" class="col-md-3 d-flex justify-content:center" >
                        <%= button_to "logout", destroy_user_session_path, method: :delete, class: "logout-box h-100" %>
                    
                    </a>
                </div>
            <% else %>
                <div class="right-side  col-3 col-sm-2 ">
                    <a href="/users/sign_in" class="h-100 d-flex flex-column justify-content-center align-items-center">
                        <div class="login-box">Login</div>
                    </a>
                </div>
            <% end %>

        </div>
        
        <div class="content-container w-100">
        <%= yield %>
        </div>
    </div>
  </body>
</html>
<script>
    console.log("application.html.erb loaded")
    
</script>
