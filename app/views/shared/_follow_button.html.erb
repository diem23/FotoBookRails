<% @id = local_assigns[:id] %>
<%= form_with url: "/discover/follow", method: :put, local: true do |f| %>
    <%= f.hidden_field :user_id, value: @id %>
    <% if @list_following.include?(@id) %>
        <%= f.button "Following", class: "follow-btn d-flex justify-content-center unfollow-btn" , id: "followButton" %>
    <% else %>
        <%= f.button "Follow", class: "follow-btn d-flex justify-content-center" , id: "followButton" %>
    <% end %>
<% end %>
<script>
let followBtns =   document.querySelectorAll('.follow-btn')  
    followBtns.forEach((btn)=>{
        btn.addEventListener('click',function stopPropagation(event){
            event.stopPropagation();
            if (btn.innerHTML == "Follow"){
                btn.innerHTML = "Following"
                btn.classList.add("unfollow-btn")
            }else{
                btn.innerHTML = "Follow"
                btn.classList.remove("unfollow-btn")
            }
        })
    })  
</script>